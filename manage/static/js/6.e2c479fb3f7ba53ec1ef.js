webpackJsonp([6],{Jinc:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("lC5x"),r=a.n(s),n=a("J0Oq"),c=a.n(n),o=a("h0S9"),u=a("s067"),l={name:"CourseIndex",data:function(){return{tableData:[],searchName:"",pageSize:5,currentPage:1,total:0,courseStyles:[],course_cover:u,status_selected:"",status:[{value:"",label:"全部"},{value:2,label:"未上传音视频"},{value:1,label:"正常"},{value:0,label:"已下线"}]}},mounted:function(){var t=this;return c()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.fetData();case 1:case"end":return e.stop()}},e,t)}))()},methods:{fetData:function(){var t=this;return c()(r.a.mark(function e(){var a,s,n,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.list({page:t.currentPage,pageSize:t.pageSize,status:t.status_selected,course_name:t.searchName});case 2:a=e.sent,s=a.data,n=s.list,c=s.total,t.setCourseType(n),t.tableData=n,t.total=c;case 7:case"end":return e.stop()}},e,t)}))()},statusChange:function(){this.currentPage=1,this.fetData()},nameChange:function(){this.fetData()},handleSizeChange:function(t){this.pageSize=t,this.fetData()},handleCurrentChange:function(t){this.currentPage=t,this.fetData()},toAddCourse:function(){this.$router.push({path:"/course/add"})},changeSwitchStatus:function(t){var e=this;return c()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.updateStatus({id:t.id,status:t.status?1:0});case 2:a.sent.code&&e.$message.success("修改成功");case 4:case"end":return a.stop()}},a,e)}))()},setCourseType:function(t){t.map(function(t){var e="";switch(t.course_type){case 1:e="视频录播-无互动模式";break;case 2:e="视频录播-互动模式";break;case 3:e="音频录播-无互动模式";break;case 4:e="音频录播-互动模式"}t.course_type_name=e,t.status_no=!1,1==t.status?t.status=!0:0==t.status?t.status=!1:t.status_no=!0})},toLive:function(t){var e=t.id;this.$router.push({path:"/course/detail/"+e})},toEdit:function(t){var e=t.id;this.$router.push({path:"/course/detail/"+e})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("div",{staticClass:"top_info"},[a("el-button-group",{staticClass:"btn_wrap"},[a("el-button",{attrs:{type:"primary"},on:{click:t.toAddCourse}},[t._v("新建单课")])],1),t._v(" "),a("div",{staticClass:"right_search"},[a("label",{staticClass:"label"},[t._v("选择课程状态：")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:t.statusChange},model:{value:t.status_selected,callback:function(e){t.status_selected=e},expression:"status_selected"}},t._l(t.status,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("el-input",{staticClass:"input_search",attrs:{placeholder:"请填写课程主题名称",clearable:""},on:{clear:t.nameChange},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.nameChange(e)}},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:t.nameChange},slot:"suffix"})])],1)],1),t._v(" "),a("el-table",{attrs:{data:t.tableData,"header-cell-style":{"background-color":"#f9fbff",height:"80px",color:"rgba(43,57,64,.85)","border-bottom":"1px #f0f0f0 solid","border-top":"1px #f0f0f0 solid"}}},[a("el-table-column",{attrs:{prop:"course_cover",width:"150",label:"封面"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.course_cover?a("img",{staticClass:"cover",attrs:{src:e.row.course_cover}}):a("img",{staticClass:"cover",attrs:{src:t.course_cover}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"course_name",label:"课程主题",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"course_name"},[t._v(t._s(e.row.course_name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"course_type_name",width:"200",label:"课程形式"}}),t._v(" "),a("el-table-column",{attrs:{label:"课程状态",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.status?t._e():a("el-tag",{attrs:{type:"danger",effect:"dark"}},[t._v("已下线")]),t._v(" "),1==e.row.status?a("el-tag",{attrs:{type:"success",effect:"dark"}},[t._v("正常")]):t._e(),t._v(" "),2==e.row.status?a("el-tag",{attrs:{type:"info",effect:"dark"}},[t._v("未上传资源")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"付费类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.pay_type?a("span",[t._v("付费")]):a("span",[t._v("免费")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"pay_money",width:"120",label:"价格"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("strong",{staticClass:"price_td"},[t._v("￥"+t._s(e.row.pay_money))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"play_time",label:"编辑状态切换",fit:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{disabled:e.row.status_no},on:{change:function(a){return t.changeSwitchStatus(e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{staticStyle:{"margin-right":"10px"},attrs:{type:"success"},on:{click:function(a){return t.toEdit(e.row)}}},[t._v("编辑课程")]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(a){return t.toLive(e.row)}}},[t._v("进入课程")])]}}])})],1),t._v(" "),a("div",{staticStyle:{"text-align":"center",margin:"30px 0"}},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":t.currentPage,"page-sizes":[5,10,20,30,40,50],"page-size":t.pageSize,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var p=a("C7Lr")(l,i,!1,function(t){a("d01f")},"data-v-d8205d62",null);e.default=p.exports},d01f:function(t,e){}});