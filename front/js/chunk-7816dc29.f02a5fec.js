(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7816dc29"],{2283:function(t,e,a){"use strict";a("dbb3")},"374a":function(t,e,a){},"9b5e":function(t,e,a){"use strict";a.r(e),a.d(e,"allList",(function(){return s})),a.d(e,"query",(function(){return n})),a.d(e,"listByCardId",(function(){return r}));var i=a("b775");function s(t){return Object(i["a"])({url:"/index/miaosha/all",method:"get",params:t})}function n(t){return Object(i["a"])({url:"/index/miaosha/query",method:"get",params:t})}function r(t){return Object(i["a"])({url:"/index/miaosha/list_by_card_id",method:"get",params:t})}},c826:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap miaosha_detail"},[a("div",{staticClass:"banner"},[a("img",{staticClass:"cover",attrs:{src:t.detail.cover,alt:""}}),a("div",{staticClass:"time"},[a("span",[t._v("活动截止时间："+t._s(t.detail.over_time))])]),a("h3",[t._v(t._s(t.detail.name))]),a("div",{staticClass:"bot"},[a("div",{staticClass:"price"},[a("span",{staticClass:"now_price"},[t._v("￥"+t._s(t.detail.now_price&&t.detail.now_price.toFixed(2)))]),a("span",{staticClass:"old_price"},[t._v("原价:￥"+t._s(t.detail.old_price&&t.detail.old_price.toFixed(2)))])]),a("div",{staticClass:"sell"},[t._v("已秒 "+t._s(t.detail.people)+" 个")])])]),a("div",{staticClass:"detail"},[a("div",{staticClass:"box"},[a("h3",[t._v("会员卡详情")]),a("div",{staticClass:"item"},[a("span",[t._v("卡名称")]),a("span",[t._v(t._s(t.detail.card_name))])]),a("div",{staticClass:"item"},[a("span",[t._v("余额")]),1==t.detail.type?a("span",[t._v(t._s(t.detail.times)+"次")]):6==t.detail.type?a("span",[t._v(t._s(t.detail.price)+"元")]):7==t.detail.type?a("span",[t._v(t._s(t.detail.hours)+"小时")]):a("span",[t._v("不限制时间")])]),a("div",{staticClass:"item"},[a("span",[t._v("有效期")]),1==t.detail.expire_date_on?a("span",[t._v(t._s(t.detail.expire_date)+"天")]):a("span",[t._v("不限")])])]),a("div",{staticClass:"box"},[a("h3",[t._v("支持课程")]),t._l(t.binds,(function(e){return a("div",{key:e.id,staticClass:"item"},[a("span",[t._v(t._s(e.course_name))])])}))],2),a("div",{staticClass:"box"},[a("h3",[t._v("适用场馆")]),a("div",{staticClass:"item"},[a("div",[t._v(t._s(t.venues.name))]),a("div",{staticClass:"contact"},[t._v("联系场馆")])])]),a("div",{staticClass:"box"},[a("h3",[t._v("秒杀说明")]),a("div",{staticClass:"content"},[t._v(" "+t._s(t.detail.des)+" ")])])]),a("div",{staticClass:"detail_info",domProps:{innerHTML:t._s(t.detail.content)}}),a("div",{staticClass:"btn"},[a("van-button",{staticClass:"left_btn",attrs:{plain:"",hairline:"",block:""}},[t._v("我的订单")]),a("van-button",{staticClass:"right_btn",attrs:{disabled:0==t.detail.tempStatus,block:"",type:"primary","native-type":"submit"},on:{click:t.sSubmit}},[1==t.detail.tempStatus?a("span",[t._v("立即抢购")]):a("span",[t._v("活动已经结束")])])],1)])},s=[],n=a("60b5"),r=(a("6a61"),a("9065"),a("a336"),a("ed08")),c=a("9b5e"),d=a("f4d0"),u={data:function(){return{detail:{id:"",name:"",card_name:"",cover:"",card_cover:"",limit:"",now_price:"",old_price:"",over_time:"",people:"",price:"",status:""},binds:[],venues:{}}},mounted:function(){this.fetchData(),this.fetchVenues()},methods:{fetchData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$route.params.id,e.next=3,c.query({id:a});case 3:i=e.sent,200==i.code&&(t.detail=i.data,t.detail.content=i.data.content.replace(/<img/g,"<img style='max-width:100%; height:auto;'"),s=(new Date).getTime(),1==i.data.status&&(n=Object(r["e"])(i.data.over_time).timeStamp,t.detail.tempStatus=s>n?0:1),t.getListByCardId(i.data.bind_card_id));case 5:case"end":return e.stop()}}),e)})))()},getListByCardId:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,c.listByCardId({card_id:t});case 2:i=a.sent,200==i.code&&(e.binds=i.data);case 4:case"end":return a.stop()}}),a)})))()},fetchVenues:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d.query();case 2:a=e.sent,200==a.code&&(t.venues=a.data);case 4:case"end":return e.stop()}}),e)})))()},sSubmit:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=t.detail.tempStatus){e.next=3;break}return t.$$toast("活动结束了"),e.abrupt("return");case 3:t.$notify({message:"功能开发中",color:"#ffffff",background:"#FF5926"});case 4:case"end":return e.stop()}}),e)})))()}}},o=u,l=(a("d765"),a("2283"),a("5d22")),v=Object(l["a"])(o,i,s,!1,null,"2b88dfb4",null);e["default"]=v.exports},d765:function(t,e,a){"use strict";a("374a")},dbb3:function(t,e,a){},f4d0:function(t,e,a){"use strict";a.r(e),a.d(e,"query",(function(){return s}));var i=a("b775");function s(t){return Object(i["a"])({url:"/index/venues/query",method:"get",params:t})}}}]);
//# sourceMappingURL=chunk-7816dc29.f02a5fec.js.map