(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-499d6284"],{"420d":function(t,e,s){"use strict";s("9a2f")},"66c0":function(t,e,s){"use strict";s("6895")},6895:function(t,e,s){},"9a2f":function(t,e,s){},dd7b:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrap login_box"},[s("div",{staticClass:"tab_menu"},[s("span",{class:t.tab_01_show?"active":"",on:{click:function(e){return t.tabClick(1)}}},[t._v("密码登录")]),s("span",{class:t.tab_02_show?"active":"",on:{click:function(e){return t.tabClick(2)}}},[t._v("短信登录")])]),s("div",{staticClass:"tab_content"},[t.tab_01_show?s("div",{staticClass:"tab_01"},[s("div",{staticClass:"form"},[s("div",{staticClass:"form_item"},[s("span",{staticClass:"pre"},[t._v("+86 >")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{placeholder:"请填写用户手机",type:"text"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),s("div",{staticClass:"form_item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{placeholder:"请填写密码",type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t.init_password?s("van-notice-bar",{attrs:{wrapable:""}},[t._v("尊敬的用户您的初始密码是："+t._s(t.init_password)+"，请登录后尽快修改您的密码")]):t._e(),s("div",{staticStyle:{"margin-top":"50px"}},[s("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"},on:{click:t.onSubmit}},[t._v("提交")])],1)],1)]):t._e(),t.tab_02_show?s("div",{staticClass:"tab_02"},[s("div",{staticClass:"form"},[s("div",{staticClass:"form_item"},[s("span",{staticClass:"pre"},[t._v("+86 >")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{placeholder:"请填写用户手机",type:"text"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),s("div",{staticClass:"form_item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.vcode,expression:"vcode"}],attrs:{placeholder:"请输入验证码",type:"text"},domProps:{value:t.vcode},on:{input:function(e){e.target.composing||(t.vcode=e.target.value)}}}),t.sending?s("span",{staticClass:"last"},[t._v("还剩 "+t._s(t.seconds)+" 秒")]):s("span",{staticClass:"last",on:{click:t.fetchVcode}},[t._v("获取验证码")])]),s("div",{staticStyle:{"margin-top":"50px"}},[s("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"},on:{click:t.smsSubmit}},[t._v("提交")])],1)])]):t._e()]),s("van-divider"),s("van-button",{attrs:{round:"",block:""},on:{click:t.toHome}},[t._v("随便看看")]),t.tab_01_show?s("div",{staticClass:"bot_f"},[s("span",{on:{click:t.toForget}},[t._v("忘记密码")]),s("span",{on:{click:t.toRegister}},[t._v("立即注册")])]):t._e(),t.tab_02_show?s("div",{staticClass:"bot_f"},[s("span",{on:{click:t.toRegister}},[t._v("立即注册")])]):t._e()],1)},n=[],o=s("cd6d"),i=(s("6a61"),s("389c"),s("9896"),s("f416"),s("ed08")),r=s("c24f"),c={data:function(){return{phone:"",password:"",vcode:"",verification_key:"",tab_01_show:!0,tab_02_show:!1,init_password:"",sending:!1,seconds:60}},mounted:function(){var t=this.$route.query.init_password;t&&(this.init_password=t),this.verification_key=i["a"].get("verification_key")},methods:{onSubmit:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var s,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.phone,a=t.password,e.next=4,r.login({phone:s,password:a});case 4:n=e.sent,200==n.code&&(o=n.data,i["a"].set("user_id",o.user_id),i["a"].set("user_token",o.token),i["a"].set("user_phone",o.phone),i["a"].set("user_head",o.head),i["a"].set("user_name",o.name),t.$router.push({path:"/"}));case 6:case"end":return e.stop()}}),e)})))()},smsSubmit:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var s,a,n,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.phone,a=t.vcode,n=t.verification_key,e.next=5,r.smsLogin({phone:s,vcode:a,verification_key:n});case 5:o=e.sent,200==o.code&&(c=o.data,i["a"].set("user_id",c.user_id),i["a"].set("user_token",c.token),i["a"].set("user_phone",c.phone),i["a"].set("user_head",c.head),i["a"].set("user_name",c.name),t.$router.push({path:"/"}));case 7:case"end":return e.stop()}}),e)})))()},toHome:function(){this.$router.replace({path:"/"})},toForget:function(){this.$router.push({path:"/forget"})},fetchVcode:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.phone,s){e.next=4;break}return t.$notify({message:"请填写手机号",color:"#ffffff"}),e.abrupt("return");case 4:return t.startReadSeconds(),e.next=7,r.getVcode({phone:s});case 7:a=e.sent,200==a.code&&(i["a"].set("verification_key",a.data.verification_key),t.verification_key=a.data.verification_key);case 9:case"end":return e.stop()}}),e)})))()},startReadSeconds:function(){var t=this;this.sending=!0;var e=setInterval((function(){if(0==t.seconds)return clearInterval(e),e=null,t.sending=!1,void(t.seconds=60);t.seconds=t.seconds-1}),1e3)},tabClick:function(t){1==t?(this.tab_01_show=!0,this.tab_02_show=!1):(this.tab_01_show=!1,this.tab_02_show=!0)},toRegister:function(){this.$router.replace({path:"/register"})}}},u=c,d=(s("66c0"),s("420d"),s("4ac2")),p=Object(d["a"])(u,a,n,!1,null,"4570acae",null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-499d6284.3e7d12c0.js.map