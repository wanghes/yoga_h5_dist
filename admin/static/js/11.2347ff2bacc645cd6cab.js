webpackJsonp([11],{"8lW6":function(e,r){},cLLu:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("lC5x"),o=t.n(a),i=t("J0Oq"),l=t.n(i),n=t("GKtG"),s={data:function(){return{form:{name:"",type:1,price:"",expire_date_on:2,expire_date:"",times:"",limit_people:"",order:0,remark:"",cover:"",hours:""}}},mounted:function(){},methods:{changeRadio:function(e){},uploadSectionFile:function(e){var r=this;return l()(o.a.mark(function t(){var a,i,l;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.file,(i=new FormData).append("file",a),t.next=5,n.uploadCardCover(i);case 5:l=t.sent,r.form.cover=l.data.data.imagePath;case 7:case"end":return t.stop()}},t,r)}))()},changeType:function(e){2==e&&(this.form.expire_date=365),3==e&&(this.form.expire_date=93),4==e&&(this.form.expire_date=31),5==e&&(this.form.expire_date=7),this.form.expire_date_on=1,6!=e&&1!=e&&7!=e||(this.form.expire_date=0,this.form.expire_date_on=2)},saveData:function(){var e=this;return l()(o.a.mark(function r(){var t,a,i,l,s,m,p,u,c,f,d,_,v;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.form,a=t.name,i=t.type,l=t.price,s=t.expire_date_on,m=t.expire_date,p=t.times,u=t.limit_people,c=t.hours,f=t.order,d=t.remark,_=t.cover,a){r.next=4;break}return e.$message.error("请填写卡种类名称"),r.abrupt("return");case 4:if(_){r.next=7;break}return e.$message.error("请上传卡片封面"),r.abrupt("return");case 7:if(i){r.next=10;break}return e.$message.error("请选择卡类别"),r.abrupt("return");case 10:if(l){r.next=13;break}return e.$message.error("请填写售价"),r.abrupt("return");case 13:if(2!=i&&3!=i&&4!=i&&5!=i){r.next=17;break}if(1==s){r.next=17;break}return e.$message.error("必须限制有效期"),r.abrupt("return");case 17:if(1!=s){r.next=21;break}if(m){r.next=21;break}return e.$message.error("请填写有效期限制天数"),r.abrupt("return");case 21:if(1!=i){r.next=25;break}if(p){r.next=25;break}return e.$message.error("请填写次卡限制次数"),r.abrupt("return");case 25:if(7!=i){r.next=29;break}if(c){r.next=29;break}return e.$message.error("请填写小时卡小时数"),r.abrupt("return");case 29:if(u){r.next=32;break}return e.$message.error("请填写单次可约最大人数"),r.abrupt("return");case 32:return r.next=34,n.add({name:a,type:i,price:l,expire_date_on:s,expire_date:m,times:p,limit_people:u,order:f,remark:d,cover:_});case 34:200==(v=r.sent).code?(e.$store.dispatch("tagsView/delView",e.$route),e.$router.push({path:"/card/index"})):(e.$message.error("数据保存失败"),console.log(v));case 36:case"end":return r.stop()}},r,e)}))()}}},m={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"wrap"},[t("el-form",{staticStyle:{"max-width":"1200px","padding-left":"30px"},attrs:{model:e.form,"label-position":"top"}},[t("el-form-item",{attrs:{label:"卡种类名称"}},[t("el-input",{model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),e._v(" "),t("el-form-item",{attrs:{required:"",label:"卡片封面"}},[e.form.cover?t("img",{staticClass:"cover_img",attrs:{src:e.form.cover}}):t("div",{staticClass:"empty_pic"},[e._v("建议尺寸385×215，JPG、PNG、webp格式，图片小于5M。")]),e._v(" "),t("el-upload",{staticClass:"upload_box",attrs:{action:"fakeaction","show-file-list":!1,"auto-upload":!0,"http-request":e.uploadSectionFile}},[t("el-button",{attrs:{type:"info"}},[e._v("点击上传")]),e._v(" "),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("建议尺寸385×215，JPG、PNG、webp格式，图片小于5M。")])],1)],1),e._v(" "),t("el-form-item",{attrs:{required:"",label:"卡类别"}},[t("el-radio-group",{on:{change:e.changeType},model:{value:e.form.type,callback:function(r){e.$set(e.form,"type",r)},expression:"form.type"}},[t("el-radio-button",{attrs:{label:1}},[e._v("次卡")]),e._v(" "),t("el-radio-button",{attrs:{label:2}},[e._v("年卡")]),e._v(" "),t("el-radio-button",{attrs:{label:3}},[e._v("季卡")]),e._v(" "),t("el-radio-button",{attrs:{label:4}},[e._v("月卡")]),e._v(" "),t("el-radio-button",{attrs:{label:5}},[e._v("周卡")]),e._v(" "),t("el-radio-button",{attrs:{label:6}},[e._v("储值卡")]),e._v(" "),t("el-radio-button",{attrs:{label:7}},[e._v("小时卡")])],1),e._v(" "),t("el-alert",{staticStyle:{"margin-top":"10px"},attrs:{type:"error",closable:!1}},[e._v("此类型一旦保存，无法修改！！！")])],1),e._v(" "),t("el-form-item",{attrs:{label:"售价"}},[t("el-input-number",{model:{value:e.form.price,callback:function(r){e.$set(e.form,"price",r)},expression:"form.price"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"有效期"}},[t("el-radio-group",{on:{change:e.changeRadio},model:{value:e.form.expire_date_on,callback:function(r){e.$set(e.form,"expire_date_on",r)},expression:"form.expire_date_on"}},[t("el-radio-button",{attrs:{label:2}},[e._v("不限制")]),e._v(" "),t("el-radio-button",{attrs:{label:1}},[e._v("限制")])],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:1==e.form.expire_date_on,expression:"form.expire_date_on == 1"}],staticClass:"days"},[t("el-input-number",{attrs:{placeholder:"填写天数"},model:{value:e.form.expire_date,callback:function(r){e.$set(e.form,"expire_date",r)},expression:"form.expire_date"}}),e._v(" 天\n            ")],1)],1),e._v(" "),1==e.form.type?t("el-form-item",{attrs:{label:"次数"}},[t("el-input-number",{attrs:{placeholder:"填写次数"},model:{value:e.form.times,callback:function(r){e.$set(e.form,"times",r)},expression:"form.times"}}),e._v(" 次\n        ")],1):e._e(),e._v(" "),7==e.form.type?t("el-form-item",{attrs:{label:"小时数"}},[t("el-input-number",{attrs:{placeholder:"填写小时数"},model:{value:e.form.hours,callback:function(r){e.$set(e.form,"hours",r)},expression:"form.hours"}}),e._v(" 小时\n        ")],1):e._e(),e._v(" "),t("el-form-item",{attrs:{label:"单次可约最大人数"}},[t("el-input-number",{attrs:{placeholder:"单次可约最大人数"},model:{value:e.form.limit_people,callback:function(r){e.$set(e.form,"limit_people",r)},expression:"form.limit_people"}}),e._v(" 人\n            "),t("el-tooltip",{staticStyle:{color:"red"},attrs:{effect:"dark",content:"用来限制该类型卡预约时，最多可以带多少人一起上课。",placement:"top"}},[t("i",{staticClass:"el-icon-warning"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"显示顺序"}},[t("el-input-number",{attrs:{placeholder:"填写显示顺序"},model:{value:e.form.order,callback:function(r){e.$set(e.form,"order",r)},expression:"form.order"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"会员卡使用说明"}},[t("el-input",{attrs:{type:"textarea",placeholder:"填写会员卡使用说明",maxlength:"255","show-word-limit":""},model:{value:e.form.remark,callback:function(r){e.$set(e.form,"remark",r)},expression:"form.remark"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.saveData}},[e._v("保 存 数 据")])],1)],1)],1)},staticRenderFns:[]};var p=t("C7Lr")(s,m,!1,function(e){t("8lW6")},"data-v-b1e11e98",null);r.default=p.exports}});