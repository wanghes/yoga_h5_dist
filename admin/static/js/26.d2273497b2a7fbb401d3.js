webpackJsonp([26],{BnSx:function(e,t){},VpTj:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("lC5x"),r=s.n(a),i=s("J0Oq"),o=s.n(i),l=s("q7OS"),n=s("h0S9"),c={name:"CourseAdd",data:function(){return{activeName:"2",main_course_styles:[],sub_course_styles:[],main_course_style:null,sub_course_style:null,main_course_style_id:"",sub_course_style_id:"",visible:!1,formLabelWidth:"120px",showMoney:!1,pid:0,showXilie:!1,seriesCourses:[],form:{course_name:"",pay_type:"0",pay_money:"",pid:""}}},mounted:function(){this.getMCStyle(),this.$route.query.pid&&(this.pid=this.$route.query.pid,this.form.pid=parseInt(this.pid),this.form.pay_type=2,this.getSeriesCourses(),this.showXilie=!0)},methods:{getMCStyle:function(){var e=this;return o()(r.a.mark(function t(){var s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getMainCourseStyle();case 2:s=t.sent,e.main_course_styles=s.data,e.main_course_style_id=e.activeName,e.getSCStyle();case 6:case"end":return t.stop()}},t,e)}))()},getSCStyle:function(){var e=this;return o()(r.a.mark(function t(){var s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getSubCourseStyle({id:e.activeName});case 2:s=t.sent,e.sub_course_styles=s.data,e.sub_course_style=null;case 5:case"end":return t.stop()}},t,e)}))()},getSeriesCourses:function(){var e=this;return o()(r.a.mark(function t(){var s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getSeriesCourses({});case 2:s=t.sent,e.seriesCourses=s.data;case 4:case"end":return t.stop()}},t,e)}))()},handleClick:function(e,t){this.main_course_style_id=this.activeName,this.getSCStyle()},openCreateBox:function(){this.sub_course_style_id?this.visible=!0:l.Message.error("请选择课程模式")},createCourse:function(){var e=this;return o()(r.a.mark(function t(){var s,a,i,o,l,c,u,d;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.visible=!1,s=e.form,a=s.pay_type,i=s.course_name,o=s.pay_money,l=s.pid,c={course_name:i,pay_type:parseInt(a),pay_money:o,course_type:1,course_style:parseInt(e.main_course_style_id),course_style_check:parseInt(e.sub_course_style_id),pid:l},0==a&&(c.pay_money=0),e.pid&&(c.pid=e.pid),t.next=7,n.add(c);case 7:u=t.sent,d=u.data.insertId,e.$alert("新建单课成功",{confirmButtonText:"去优化",callback:function(t){e.$store.dispatch("tagsView/delView",e.$route),e.$router.push({path:"/course/detail/"+d})}});case 10:case"end":return t.stop()}},t,e)}))()},changeRadio:function(e){var t=null;this.sub_course_styles.forEach(function(s){s.name==e&&(t=s.id)}),this.sub_course_style_id=t},changePayType:function(e){e=parseInt(e);this.showMoney=!1,this.showXilie=!1,1==e?this.showMoney=!0:2==e&&(this.showXilie=!0,this.getSeriesCourses())},changePayTypeByTime:function(e){switch(e){case"1":console.log(e)}}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrap",staticStyle:{height:"600px"}},[s("el-tabs",{staticStyle:{height:"100%"},attrs:{"tab-position":"top",type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"视频录播",name:"2"}},[s("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("适用特点")])]),e._v(" "),s("div",{staticClass:"text item"},[e._v("1、以录制为主的上课模式")]),e._v(" "),s("div",{staticClass:"text item"},[e._v("2、适合专业性强内容")]),e._v(" "),s("div",{staticClass:"text item"},[e._v("3、支持免费试听")]),e._v(" "),s("div",{staticClass:"text item"},[e._v("4、课程重复利用率高")]),e._v(" "),s("div",{staticClass:"text item"},[e._v("5、支持单课、系列课、打卡")])]),e._v(" "),s("el-radio-group",{staticClass:"group",on:{change:e.changeRadio},model:{value:e.sub_course_style,callback:function(t){e.sub_course_style=t},expression:"sub_course_style"}},e._l(e.sub_course_styles,function(e,t){return s("el-radio",{key:t,attrs:{label:e.name,disabled:"互动模式"==e.name,border:""}})}),1),e._v(" "),s("div",{staticClass:"btn_wrap"},[s("el-button",{attrs:{type:"primary"},on:{click:e.openCreateBox}},[e._v("创建课程")])],1)],1),e._v(" "),s("el-tab-pane",{attrs:{label:"音频录播",name:"3"}},[s("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("适用特点")])]),e._v(" "),s("div",{staticClass:"text item"},[e._v("1、以录制为主的上课模式")]),e._v(" "),s("div",{staticClass:"text item"},[e._v("2、配合语音多媒体教学")]),e._v(" "),s("div",{staticClass:"text item"},[e._v("3、知识直达效率更高")]),e._v(" "),s("div",{staticClass:"text item"},[e._v("4、支持单课、系列课、打卡课程")])]),e._v(" "),s("el-radio-group",{staticClass:"group",on:{change:e.changeRadio},model:{value:e.sub_course_style,callback:function(t){e.sub_course_style=t},expression:"sub_course_style"}},e._l(e.sub_course_styles,function(e,t){return s("el-radio",{key:t,attrs:{label:e.name,disabled:"互动模式"==e.name,border:""}})}),1),e._v(" "),s("div",{staticClass:"btn_wrap"},[s("el-button",{attrs:{type:"primary"},on:{click:e.openCreateBox}},[e._v("创建课程")])],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"一步创建课程",visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[s("el-form",{attrs:{model:e.form}},[s("el-form-item",{attrs:{required:"",label:"课程主题","label-width":e.formLabelWidth}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.course_name,callback:function(t){e.$set(e.form,"course_name",t)},expression:"form.course_name"}})],1),e._v(" "),s("el-form-item",{attrs:{required:"",label:"收费类型","label-width":e.formLabelWidth}},[s("el-radio-group",{on:{change:e.changePayType},model:{value:e.form.pay_type,callback:function(t){e.$set(e.form,"pay_type",t)},expression:"form.pay_type"}},[s("el-radio",{attrs:{label:0,disabled:0!=e.pid,border:""}},[e._v("免费")]),e._v(" "),s("el-radio",{attrs:{label:1,disabled:0!=e.pid,border:""}},[e._v("付费")]),e._v(" "),s("el-radio",{attrs:{label:2,border:""}},[e._v("系列课")])],1)],1),e._v(" "),e.showMoney?s("el-form-item",{attrs:{required:"",label:"金额","label-width":e.formLabelWidth}},[s("el-input",{model:{value:e.form.pay_money,callback:function(t){e.$set(e.form,"pay_money",t)},expression:"form.pay_money"}})],1):e._e(),e._v(" "),e.showXilie?s("el-form-item",{attrs:{required:"",label:"选择系列课","label-width":e.formLabelWidth}},[s("el-select",{attrs:{disabled:0!=e.pid,placeholder:"请选择系列课"},model:{value:e.form.pid,callback:function(t){e.$set(e.form,"pid",t)},expression:"form.pid"}},e._l(e.seriesCourses,function(e){return s("el-option",{key:e.course_id,attrs:{label:e.course_name,value:e.course_id}})}),1)],1):e._e()],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.createCourse}},[e._v("完 成")])],1)],1)],1)},staticRenderFns:[]};var d=s("C7Lr")(c,u,!1,function(e){s("BnSx")},"data-v-698e0e23",null);t.default=d.exports}});