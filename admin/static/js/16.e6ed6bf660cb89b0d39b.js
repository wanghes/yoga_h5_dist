webpackJsonp([16],{"8aNR":function(t,e){},OVtr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("lC5x"),n=a.n(r),i=a("J0Oq"),s=a.n(i),o=a("T+qa"),u={data:function(){return{list:[],visible:!1,title:"添加项目",types:[{name:"首页",id:1},{name:"线上课程首页",id:2}],editId:"",editStatus:!1,form:{pic:"",type:1,url:""}}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this;return s()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.list();case 2:a=e.sent,t.list=a.data;case 4:case"end":return e.stop()}},e,t)}))()},query:function(){var t=this;return s()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.query({id:t.editId});case 2:200==(a=e.sent).code&&(t.form=a.data);case 4:case"end":return e.stop()}},e,t)}))()},uploadSectionFile:function(t){var e=this;return s()(n.a.mark(function a(){var r,i,s;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=t.file,(i=new FormData).append("file",r),a.next=5,o.uploadCover(i);case 5:s=a.sent,e.form.pic=s.data.data.imagePath;case 7:case"end":return a.stop()}},a,e)}))()},toAdd:function(){this.visible=!0,this.editStatus=!1},saveData:function(){var t=this;return s()(n.a.mark(function e(){var a,r,i,s,u,l;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.form,r=a.pic,i=a.type,s=a.url,r){e.next=4;break}return t.$message.error("请上传图片"),e.abrupt("return");case 4:if(s){e.next=7;break}return t.$message.error("请填写链接地址"),e.abrupt("return");case 7:if(i){e.next=10;break}return t.$message.error("请上选择所属页面"),e.abrupt("return");case 10:if(u=null,t.editStatus){e.next=17;break}return e.next=14,o.add({pic:r,url:s,type:i});case 14:u=e.sent,e.next=21;break;case 17:return l=t.editId,e.next=20,o.update({id:l,pic:r,url:s,type:i});case 20:u=e.sent;case 21:200==u.code&&(t.$message.success(u.msg),t.fetchData()),t.form={pic:"",type:1,url:""},t.visible=!1;case 24:case"end":return e.stop()}},e,t)}))()},editItem:function(t){this.visible=!0,this.editStatus=!0,this.editId=t.id,this.query()},deleteItem:function(t){var e=this;return s()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.deleteItem({id:t});case 2:200==a.sent.code&&(e.$message.success("操作成功"),e.fetchData());case 4:case"end":return a.stop()}},a,e)}))()}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("div",{staticClass:"top_info"},[a("el-button-group",{staticClass:"btn_wrap"},[a("el-button",{attrs:{type:"primary"},on:{click:t.toAdd}},[t._v("添加一个")])],1)],1),t._v(" "),a("el-table",{attrs:{data:t.list}},[a("el-table-column",{attrs:{width:"300",label:"图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{"max-width":"280px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"url",width:"300",label:"地址"}}),t._v(" "),a("el-table-column",{attrs:{width:"200",label:"所属页面"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.type?a("span",[t._v("首页焦点图")]):t._e(),t._v(" "),2==e.row.type?a("span",[t._v("线上视频主页焦点图")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.editItem(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-popover",{attrs:{placement:"top",trigger:"click",width:160}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("span",[t._v("你确定要删除吗？")])]),t._v(" "),a("div",{staticStyle:{"text-align":"center",margin:"0"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.deleteItem(e.row.id)}}},[t._v("确定")])],1),t._v(" "),a("template",{slot:"reference"},[a("el-button",{attrs:{size:"mini",type:"danger"}},[t._v("删除")])],1)],2)]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,width:"40%",visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{attrs:{model:t.form,"label-position":"top"}},[a("el-form-item",{attrs:{required:"",label:"图片"}},[t.form.pic?a("img",{staticStyle:{"max-width":"100%"},attrs:{src:t.form.pic}}):a("div",{staticClass:"empty_pic"},[t._v("建议尺寸280×180，JPG、PNG、webp格式，图片小于5M。")]),t._v(" "),a("el-upload",{staticClass:"upload_box",attrs:{action:"fakeaction","show-file-list":!1,"auto-upload":!0,"http-request":t.uploadSectionFile}},[a("el-button",{attrs:{type:"danger"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("建议尺寸280×180，JPG、PNG、webp格式，图片小于5M。")])],1)],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"链接地址"}},[a("el-input",{attrs:{placeholder:"请输入链接地址",autocomplete:"off"},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"选择所属页面"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.types,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.saveData}},[t._v("保 存 数 据")])],1)],1)],1)],1)},staticRenderFns:[]};var c=a("C7Lr")(u,l,!1,function(t){a("8aNR")},"data-v-db4d18f0",null);e.default=c.exports},"T+qa":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.list=function(t){return Object(r.a)({url:"/admin/focus/alllist",method:"get",params:t})},e.query=function(t){return Object(r.a)({url:"/admin/focus/query",method:"get",params:t})},e.add=function(t){return Object(r.a)({url:"/admin/focus/add",method:"post",data:t})},e.update=function(t){return Object(r.a)({url:"/admin/focus/update",method:"put",data:t})},e.deleteItem=function(t){return Object(r.a)({url:"/admin/focus/delete",method:"delete",params:t})},e.updateStatus=function(t){return Object(r.a)({url:"/admin/focus/status",method:"put",data:t})},e.uploadCover=function(t){return i.a.post(s.c+"/upload/focus",t,{headers:{"Content-Type":"multipart/form-data"}})};var r=a("vLgD"),n=a("I29D"),i=a.n(n),s=a("QmSG")}});