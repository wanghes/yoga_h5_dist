webpackJsonp([14],{XeGH:function(e,r){},i7HS:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("lC5x"),n=t.n(a),o=t("J0Oq"),i=t.n(o),s=t("GKtG"),u=t("uqvW"),l={name:"flaseSaleDetail",data:function(){return{form:{name:"",des:"",cover:"",over_time:"",limit:1,bind_card_id:"",now_price:0,old_price:0,intro:"",people:0},cards:[],editStatus:!1}},mounted:function(){var e=this.$route.query.id;e&&(this.editStatus=!0,this.fetchDetail(e)),this.fetchCards()},methods:{fetchCards:function(){var e=this;return i()(n.a.mark(function r(){var t;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.all();case 2:200==(t=r.sent).code&&(e.cards=t.data);case 4:case"end":return r.stop()}},r,e)}))()},fetchDetail:function(e){var r=this;return i()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.query({id:e});case 2:200==(a=t.sent).code&&(r.form=a.data);case 4:case"end":return t.stop()}},t,r)}))()},cardChange:function(){},uploadSectionFile:function(e){var r=this;return i()(n.a.mark(function t(){var a,o,i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.file,(o=new FormData).append("file",a),t.next=5,u.uploadCover(o);case 5:i=t.sent,r.form.cover=i.data.data.imagePath;case 7:case"end":return t.stop()}},t,r)}))()},saveData:function(){var e=this;return i()(n.a.mark(function r(){var t,a,o,i,s,l,c,d,m,p,f,v,_;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.$route.query.id,a=e.form,o=a.name,i=a.cover,s=a.limit,l=a.bind_card_id,c=a.over_time,d=a.des,m=a.intro,p=a.now_price,f=a.old_price,v=a.people,o){r.next=5;break}return e.$message.error("请填写拼团活动名称"),r.abrupt("return");case 5:if(i){r.next=8;break}return e.$message.error("请上传拼团封面"),r.abrupt("return");case 8:if(m){r.next=11;break}return e.$message.error("请填写拼团活动简单描述"),r.abrupt("return");case 11:if(0!=s){r.next=14;break}return e.$message.error("请填写拼团活动每人限制次数"),r.abrupt("return");case 14:if(0!=p){r.next=17;break}return e.$message.error("请填写拼团活动价格"),r.abrupt("return");case 17:if(0!=f){r.next=20;break}return e.$message.error("请填写拼团活动之前的价格"),r.abrupt("return");case 20:if(l){r.next=23;break}return e.$message.error("请选择活动卡"),r.abrupt("return");case 23:if(c){r.next=26;break}return e.$message.error("请设置活动截止时间"),r.abrupt("return");case 26:if(d){r.next=29;break}return e.$message.error("请填写活动卡使用说明"),r.abrupt("return");case 29:if(_={},!e.editStatus){r.next=36;break}return r.next=33,u.edit({id:t,name:o,cover:i,limit:s,bind_card_id:l,over_time:c,des:d,now_price:p,old_price:f,intro:m,people:v});case 33:_=r.sent,r.next=39;break;case 36:return r.next=38,u.add({name:o,cover:i,limit:s,bind_card_id:l,over_time:c,des:d,now_price:p,old_price:f,intro:m,people:v});case 38:_=r.sent;case 39:200==_.code&&(e.$store.dispatch("tagsView/delView",e.$route),e.$router.push({path:"/actives/group_purchase"}));case 40:case"end":return r.stop()}},r,e)}))()}}},c={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"wrap"},[t("el-form",{staticStyle:{"max-width":"1000px","padding-left":"30px"},attrs:{model:e.form,"label-position":"top"}},[t("el-form-item",{attrs:{required:"",label:"拼团活动名称"}},[t("el-input",{model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),e._v(" "),t("el-form-item",{attrs:{required:"",label:"拼团封面"}},[e.form.cover?t("img",{attrs:{src:e.form.cover}}):t("div",{staticClass:"empty_pic"},[e._v("建议尺寸280×180，JPG、PNG、webp格式，图片小于5M。")]),e._v(" "),t("el-upload",{staticClass:"upload_box",attrs:{action:"fakeaction","show-file-list":!1,"auto-upload":!0,"http-request":e.uploadSectionFile}},[t("el-button",{attrs:{type:"info"}},[e._v("点击上传")]),e._v(" "),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("建议尺寸280×180，JPG、PNG、webp格式，图片小于5M。")])],1)],1),e._v(" "),t("el-form-item",{attrs:{required:"",label:"活动简单描述（50字）"}},[t("el-input",{attrs:{type:"textarea",placeholder:"填写活动简单描述（50字）",maxlength:"50","show-word-limit":""},model:{value:e.form.intro,callback:function(r){e.$set(e.form,"intro",r)},expression:"form.intro"}})],1),e._v(" "),t("el-form-item",{attrs:{required:"",label:"团购活动每人限制次数"}},[e._v("\b\n            "),t("el-input-number",{model:{value:e.form.limit,callback:function(r){e.$set(e.form,"limit",r)},expression:"form.limit"}})],1),e._v(" "),t("el-form-item",{attrs:{required:"",label:"团购价格"}},[t("el-input-number",{model:{value:e.form.now_price,callback:function(r){e.$set(e.form,"now_price",r)},expression:"form.now_price"}})],1),e._v(" "),t("el-form-item",{attrs:{required:"",label:"团购之前价格"}},[t("el-input-number",{model:{value:e.form.old_price,callback:function(r){e.$set(e.form,"old_price",r)},expression:"form.old_price"}})],1),e._v(" "),t("el-form-item",{attrs:{required:"",label:"已拼团数"}},[t("el-input-number",{model:{value:e.form.people,callback:function(r){e.$set(e.form,"people",r)},expression:"form.people"}})],1),e._v(" "),t("el-form-item",{attrs:{required:"",label:"选择活动卡"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择活动卡"},on:{change:e.cardChange},model:{value:e.form.bind_card_id,callback:function(r){e.$set(e.form,"bind_card_id",r)},expression:"form.bind_card_id"}},e._l(e.cards,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{required:"",label:"活动截止时间"}},[t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择活动截止时间"},model:{value:e.form.over_time,callback:function(r){e.$set(e.form,"over_time",r)},expression:"form.over_time"}})],1),e._v(" "),t("el-form-item",{attrs:{required:"",label:"活动卡使用说明"}},[t("el-input",{attrs:{type:"textarea",placeholder:"填写活动卡使用说明",rows:"8",maxlength:"255","show-word-limit":""},model:{value:e.form.des,callback:function(r){e.$set(e.form,"des",r)},expression:"form.des"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.saveData}},[e._v("保 存 数 据")])],1)],1)],1)},staticRenderFns:[]};var d=t("C7Lr")(l,c,!1,function(e){t("XeGH")},"data-v-2c0eb694",null);r.default=d.exports},uqvW:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.list=function(e){return Object(a.a)({url:"/admin/group_purchase/list",method:"get",params:e})},r.add=function(e){return Object(a.a)({url:"/admin/group_purchase/add",method:"post",data:e})},r.edit=function(e){return Object(a.a)({url:"/admin/group_purchase/edit",method:"put",data:e})},r.query=function(e){return Object(a.a)({url:"/admin/group_purchase/query",method:"get",params:e})},r.deleteItem=function(e){return Object(a.a)({url:"/admin/group_purchase/delete",method:"delete",params:e})},r.updateStatus=function(e){return Object(a.a)({url:"/admin/group_purchase/status",method:"put",data:e})},r.uploadCover=function(e){return o.a.post(i.c+"/upload/upload_group_purchase_cover",e,{headers:{"Content-Type":"multipart/form-data"}})};var a=t("vLgD"),n=t("I29D"),o=t.n(n),i=t("QmSG")}});