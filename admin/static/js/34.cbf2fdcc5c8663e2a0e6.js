webpackJsonp([34],{Jinc:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("lC5x"),n=a.n(s),r=a("J0Oq"),c=a.n(r),o=a("h0S9"),u=a("s067"),i={name:"CourseIndex",data:function(){return{tableData:[],searchName:"",pageSize:5,currentPage:1,total:0,courseStyles:[],course_cover:u,status_selected:"",status:[{value:"",label:"全部"},{value:2,label:"未上传音视频"},{value:1,label:"正常"},{value:0,label:"已下线"}]}},mounted:function(){var e=this;return c()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.fetData();case 1:case"end":return t.stop()}},t,e)}))()},methods:{fetData:function(){var e=this;return c()(n.a.mark(function t(){var a,s,r,c;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.list({page:e.currentPage,pageSize:e.pageSize,status:e.status_selected,course_name:e.searchName});case 2:a=t.sent,s=a.data,r=s.list,c=s.total,e.setCourseType(r),e.tableData=r,e.total=c;case 7:case"end":return t.stop()}},t,e)}))()},statusChange:function(){this.currentPage=1,this.fetData()},nameChange:function(){this.fetData()},handleSizeChange:function(e){this.pageSize=e,this.fetData()},handleCurrentChange:function(e){this.currentPage=e,this.fetData()},toAddCourse:function(){this.$router.push({path:"/course/add"})},changeSwitchStatus:function(e){var t=this;return c()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.updateStatus({id:e.id,status:e.edit_status?1:0});case 2:200==a.sent.code&&t.$message.success("修改成功");case 4:case"end":return a.stop()}},a,t)}))()},setCourseType:function(e){e.map(function(e){var t="";switch(e.course_type){case 1:t="视频录播-无互动模式";break;case 2:t="视频录播-互动模式";break;case 3:t="音频录播-无互动模式";break;case 4:t="音频录播-互动模式"}e.course_type_name=t,e.status_no_upload=!1,1==e.status?e.edit_status=!0:0==e.status?e.edit_status=!1:e.status_no_upload=!0})},toLive:function(e){var t=e.id;this.$router.push({path:"/course/detail/"+t})},toEdit:function(e){var t=e.id;this.$router.push({path:"/course/detail/"+t})},setJingpin:function(e){var t=this;return c()(n.a.mark(function a(){var s;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.updateJingpin({id:e.id,jingpin:1});case 2:200==(s=a.sent).code&&(t.$message.success(s.msg),t.fetData());case 4:case"end":return a.stop()}},a,t)}))()},cancelJingpin:function(e){var t=this;return c()(n.a.mark(function a(){var s;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.updateJingpin({id:e.id,jingpin:0});case 2:200==(s=a.sent).code&&(t.$message.success(s.msg),t.fetData());case 4:case"end":return a.stop()}},a,t)}))()}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrap"},[a("div",{staticClass:"top_info"},[a("el-button-group",{staticClass:"btn_wrap"},[a("el-button",{attrs:{type:"primary"},on:{click:e.toAddCourse}},[e._v("新建单课")])],1),e._v(" "),a("div",{staticClass:"right_search"},[a("label",{staticClass:"label"},[e._v("选择课程状态：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:e.statusChange},model:{value:e.status_selected,callback:function(t){e.status_selected=t},expression:"status_selected"}},e._l(e.status,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{staticClass:"input_search",attrs:{placeholder:"请填写课程主题名称",clearable:""},on:{clear:e.nameChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.nameChange(t)}},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.nameChange},slot:"suffix"})])],1)],1),e._v(" "),a("el-table",{attrs:{data:e.tableData,"header-cell-style":{"background-color":"#f9fbff",height:"80px",color:"rgba(43,57,64,.85)","border-bottom":"1px #f0f0f0 solid","border-top":"1px #f0f0f0 solid"}}},[a("el-table-column",{attrs:{prop:"course_cover",width:"150",label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.course_cover?a("img",{staticClass:"cover",attrs:{src:t.row.course_cover}}):a("img",{staticClass:"cover",attrs:{src:e.course_cover}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"course_name",label:"课程主题",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"course_name"},[e._v(e._s(t.row.course_name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"course_type_name",width:"200",label:"课程形式"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否设置为精品课",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.pid?a("div",[0==t.row.jingpin?a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.setJingpin(t.row)}}},[e._v("设置为精品课")]):a("el-link",{attrs:{type:"danger"},on:{click:function(a){return e.cancelJingpin(t.row)}}},[e._v("取消精品课")])],1):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"课程状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?e._e():a("el-tag",{attrs:{type:"danger",effect:"dark"}},[e._v("已下线")]),e._v(" "),1==t.row.status?a("el-tag",{attrs:{type:"success",effect:"dark"}},[e._v("正常")]):e._e(),e._v(" "),2==t.row.status?a("el-tag",{attrs:{type:"info",effect:"dark"}},[e._v("未上传资源")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"付费类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.pay_type?a("span",[e._v("付费")]):a("span",[e._v("免费")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"pay_money",width:"120",label:"价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("strong",{staticClass:"price_td"},[e._v("￥"+e._s(t.row.pay_money))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"play_time",label:"编辑状态切换",fit:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{disabled:t.row.status_no_upload},on:{change:function(a){return e.changeSwitchStatus(t.row)}},model:{value:t.row.edit_status,callback:function(a){e.$set(t.row,"edit_status",a)},expression:"scope.row.edit_status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{staticStyle:{"margin-right":"10px"},attrs:{type:"success"},on:{click:function(a){return e.toEdit(t.row)}}},[e._v("编辑课程")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(a){return e.toLive(t.row)}}},[e._v("进入课程")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center",margin:"30px 0"}},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":e.currentPage,"page-sizes":[5,10,20,30,40,50],"page-size":e.pageSize,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var p=a("C7Lr")(i,l,!1,function(e){a("dh1K")},"data-v-2efa10e3",null);t.default=p.exports},dh1K:function(e,t){}});